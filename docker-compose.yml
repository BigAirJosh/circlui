services:
  workspace:
    image: scratch
    user: "${USER_ID}:${GROUP_ID}"
    volumes:
      - "${PWD}:${PWD}"
    working_dir: "${PWD}"

  go:
    extends:
      service: workspace
    image: golang:1.20.0-alpine3.17
    links:
      - wiremock
    environment:
      - GOCACHE=/tmp/
      - HOME=${PWD}
    tty: true
    command: go run circlui.go

  wiremock:
    image: wiremock/wiremock:2.35.0
    volumes:
      - "${PWD}/wiremock:/home/wiremock"
    ports:
      - "8080:8080"
